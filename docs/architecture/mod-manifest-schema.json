{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://pokenet.io/schemas/modinfo.json",
  "title": "PokeNET Mod Manifest",
  "description": "Schema for PokeNET mod manifest file (modinfo.json)",
  "type": "object",
  "required": ["id", "name", "version", "apiVersion"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the mod (reverse domain notation recommended)",
      "pattern": "^[a-z0-9._-]+$",
      "minLength": 3,
      "maxLength": 64,
      "examples": ["com.example.supermod", "pokenet.core.expansion"]
    },
    "name": {
      "type": "string",
      "description": "Human-readable name of the mod",
      "minLength": 1,
      "maxLength": 128,
      "examples": ["Super Mod", "PokeNET Core Expansion"]
    },
    "version": {
      "type": "string",
      "description": "Mod version following semantic versioning (MAJOR.MINOR.PATCH)",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
      "examples": ["1.0.0", "2.1.3", "1.0.0-beta.1"]
    },
    "apiVersion": {
      "type": "string",
      "description": "Required PokeNET.ModApi version (supports version ranges)",
      "pattern": "^(\\^|~|>=|>|<=|<|=)?\\s*(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
      "examples": ["1.0.0", "^1.2.0", ">=2.0.0"]
    },
    "author": {
      "type": "string",
      "description": "Mod author name or organization",
      "maxLength": 128,
      "examples": ["John Doe", "PokeNET Community"]
    },
    "description": {
      "type": "string",
      "description": "Brief description of mod functionality",
      "maxLength": 500,
      "examples": ["Adds 150 new creatures with unique abilities"]
    },
    "homepage": {
      "type": "string",
      "format": "uri",
      "description": "URL to mod's homepage or repository",
      "examples": ["https://github.com/user/mod"]
    },
    "license": {
      "type": "string",
      "description": "SPDX license identifier",
      "examples": ["MIT", "GPL-3.0", "Apache-2.0", "Proprietary"]
    },
    "tags": {
      "type": "array",
      "description": "Tags for categorizing the mod",
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 32
      },
      "maxItems": 10,
      "examples": [["creatures", "balance", "ui"]]
    },
    "dependencies": {
      "type": "array",
      "description": "Required mods that must be loaded before this mod",
      "items": {
        "type": "object",
        "required": ["modId"],
        "properties": {
          "modId": {
            "type": "string",
            "description": "ID of the required mod",
            "examples": ["pokenet.core"]
          },
          "version": {
            "type": "string",
            "description": "Required version (supports ranges)",
            "pattern": "^(\\^|~|>=|>|<=|<|=)?\\s*(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
            "examples": ["^1.0.0", ">=2.1.0"]
          },
          "optional": {
            "type": "boolean",
            "description": "Whether this dependency is optional",
            "default": false
          }
        }
      },
      "examples": [
        [
          {
            "modId": "pokenet.core",
            "version": "^1.0.0"
          }
        ]
      ]
    },
    "loadAfter": {
      "type": "array",
      "description": "Mods that should be loaded before this mod (soft dependency)",
      "items": {
        "type": "string"
      },
      "examples": [["pokenet.ui.overhaul", "mod.graphics.hd"]]
    },
    "loadBefore": {
      "type": "array",
      "description": "Mods that should be loaded after this mod",
      "items": {
        "type": "string"
      },
      "examples": [["mod.compatibility.patch"]]
    },
    "incompatibleWith": {
      "type": "array",
      "description": "Mods that cannot be loaded together with this mod",
      "items": {
        "type": "object",
        "required": ["modId"],
        "properties": {
          "modId": {
            "type": "string",
            "description": "ID of the incompatible mod"
          },
          "reason": {
            "type": "string",
            "description": "Explanation of incompatibility",
            "examples": ["Conflicts with UI system"]
          }
        }
      }
    },
    "modType": {
      "type": "string",
      "enum": ["data", "content", "code", "hybrid"],
      "description": "Primary type of mod",
      "default": "hybrid"
    },
    "entryPoint": {
      "type": "string",
      "description": "Fully qualified name of the mod's entry class (for code mods)",
      "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*(\\.[a-zA-Z_][a-zA-Z0-9_]*)*$",
      "examples": ["MyMod.ModEntry", "Com.Example.SuperMod.Entry"]
    },
    "assemblies": {
      "type": "array",
      "description": "Additional assemblies to load (for code mods)",
      "items": {
        "type": "string",
        "pattern": "^[^/\\\\]+\\.dll$"
      },
      "examples": [["MyMod.dll", "MyMod.Utils.dll"]]
    },
    "harmonyId": {
      "type": "string",
      "description": "Custom Harmony instance ID (defaults to mod ID)",
      "pattern": "^[a-z0-9._-]+$",
      "examples": ["com.example.mymod.harmony"]
    },
    "assetPaths": {
      "type": "object",
      "description": "Custom asset directory mappings",
      "properties": {
        "textures": {
          "type": "string",
          "default": "Assets/Textures"
        },
        "audio": {
          "type": "string",
          "default": "Assets/Audio"
        },
        "data": {
          "type": "string",
          "default": "Data"
        }
      }
    },
    "preload": {
      "type": "array",
      "description": "Assets to preload during mod initialization",
      "items": {
        "type": "string"
      },
      "examples": [["textures/logo.png", "data/creatures.json"]]
    },
    "trustLevel": {
      "type": "string",
      "enum": ["safe", "trusted", "untrusted"],
      "description": "Security trust level for the mod",
      "default": "untrusted"
    },
    "checksum": {
      "type": "string",
      "description": "SHA256 checksum of mod assembly (for verification)",
      "pattern": "^[a-fA-F0-9]{64}$"
    },
    "contentRating": {
      "type": "string",
      "enum": ["everyone", "teen", "mature"],
      "description": "Age-appropriate content rating",
      "default": "everyone"
    },
    "localization": {
      "type": "object",
      "description": "Localization support information",
      "properties": {
        "supportedLanguages": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z]{2}(-[A-Z]{2})?$"
          },
          "examples": [["en", "en-US", "es", "ja"]]
        },
        "defaultLanguage": {
          "type": "string",
          "pattern": "^[a-z]{2}(-[A-Z]{2})?$",
          "default": "en"
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional custom metadata (mod-specific)",
      "additionalProperties": true
    },
    "changelog": {
      "type": "array",
      "description": "Version history and changes",
      "items": {
        "type": "object",
        "required": ["version", "changes"],
        "properties": {
          "version": {
            "type": "string"
          },
          "date": {
            "type": "string",
            "format": "date"
          },
          "changes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    }
  },
  "examples": [
    {
      "id": "pokenet.expansion.johto",
      "name": "Johto Region Expansion",
      "version": "1.2.0",
      "apiVersion": "^1.0.0",
      "author": "PokeNET Community",
      "description": "Adds Johto region with 100 new creatures, 8 gyms, and new storyline",
      "homepage": "https://github.com/pokenet/johto-expansion",
      "license": "MIT",
      "tags": ["region", "creatures", "storyline"],
      "dependencies": [
        {
          "modId": "pokenet.core",
          "version": "^1.0.0"
        }
      ],
      "loadAfter": ["pokenet.ui.overhaul"],
      "modType": "hybrid",
      "entryPoint": "JohtoExpansion.ModEntry",
      "assemblies": ["JohtoExpansion.dll"],
      "harmonyId": "pokenet.johto",
      "assetPaths": {
        "textures": "Assets/Graphics",
        "audio": "Assets/Sounds",
        "data": "Data"
      },
      "preload": ["textures/johto_logo.png"],
      "trustLevel": "trusted",
      "contentRating": "everyone",
      "localization": {
        "supportedLanguages": ["en", "es", "ja"],
        "defaultLanguage": "en"
      },
      "changelog": [
        {
          "version": "1.2.0",
          "date": "2025-10-20",
          "changes": [
            "Added 10 new creatures",
            "Fixed battle music bug",
            "Improved gym leader AI"
          ]
        },
        {
          "version": "1.1.0",
          "date": "2025-09-15",
          "changes": [
            "Added Elite Four",
            "New legendary creatures"
          ]
        }
      ]
    }
  ]
}
